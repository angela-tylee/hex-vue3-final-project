import{q as d}from"./index-DOaFCEPn.js";import{a as o,S as a}from"./sweetalert2.all-3NlZ93nL.js";var n={VITE_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"angelalee",BASE_URL:"/hex-vue3-final-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:i,VITE_API_PATH:c}=n,l=d("cartStore",{state:()=>({carts:{},cartQty:0,cartLength:0,storeStatus:{cartLoading:!1,addCartLoading:!1}}),actions:{getCart(){this.storeStatus.cartLoading=!0,o.get(`${i}/api/${c}/cart`).then(t=>{this.storeStatus.cartLoading=!1,console.log(t),this.carts=t.data.data,this.cartLength=this.carts.carts.length,this.getCartQty()}).catch(t=>{a.fire({title:t.response.data.message,confirmButtonColor:"var(--bs-danger)"}),this.storeStatus.cartLoading=!1})},changeCartQty(t,r=1){const s={product_id:t.product.id,qty:r};o.put(`${i}/api/${c}/cart/${t.id}`,{data:s}).then(()=>{this.getCart()}).catch(e=>{a.fire({title:e.response.data.message,confirmButtonColor:"var(--bs-danger)"})})},getCartQty(){this.cartQty=0,this.carts.carts.forEach(t=>{this.cartQty+=t.qty})},addToCart(t,r=1){const s={product_id:t.id,qty:r};this.storeStatus.addCartLoading=!0,o.post(`${i}/api/${c}/cart`,{data:s}).then(()=>{this.storeStatus.addCartLoading=!1,a.fire({title:"已加入購物車!",icon:"success",confirmButtonColor:"var(--bs-primary)",iconColor:"var(--bs-primary)"}),this.getCart()}).catch(e=>{a.fire({title:e.response.data.message,confirmButtonColor:"var(--bs-danger)"}),this.storeStatus.addCartLoading=!1})}}});export{l as c};
