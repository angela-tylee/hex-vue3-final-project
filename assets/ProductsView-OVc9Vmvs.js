import{a as w,S as z}from"./sweetalert2.all-3NlZ93nL.js";import{_ as T,a as D,r as f,o as a,c as r,b as e,d,w as u,t as i,n as p,F as _,i as m,k as I,v as V,e as h,g as k,f as g,p as S,h as E}from"./index-wTFFeIzK.js";import{c as L}from"./cartStore-EvK4yIYv.js";var P={VITE_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"angelalee",BASE_URL:"/hex-vue3-final-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:A,VITE_API_PATH:R}=P,x={data(){return{products:[],pages:{},categories:[{zh:"蛋糕",en:"Cake"},{zh:"起司蛋糕",en:"Cheesecake"},{zh:"派 / 塔",en:"Pie / Tart"},{zh:"麵包",en:"Bread"},{zh:"其他",en:"Others"}],status:{productsLoading:!1}}},watch:{"$route.query":{handler(){this.getData()},deep:!0},"$i18n.locale":{handler(){this.getData()},deep:!0}},methods:{getData(s=1){const{category:n=""}=this.$route.query,b=`${A}/api/${R}/products?category=${n}&page=${s}`;this.status.productsLoading=!0,w.get(b).then(c=>{this.status.productsLoading=!1,this.pages=c.data.pagination,this.products=[],this.$i18n.locale==="zh-TW"?this.products=c.data.products:this.$i18n.locale==="en"&&c.data.products.forEach(o=>{this.products.push({...o.en,id:o.id,imageUrl:o.imageUrl,price:o.price,origin_price:o.origin_price})})}).catch(c=>{z.fire({title:c.response.data.message,confirmButtonColor:"var(--bs-danger)"})})},...D(L,["addToCart"])},mounted(){this.getData()}},y=s=>(S("data-v-7197eb88"),s=s(),E(),s),B=y(()=>e("div",{class:"hero-img"},null,-1)),U={class:"container"},O={"aria-label":"breadcrumb"},q={class:"breadcrumb"},N={class:"breadcrumb-item"},W={class:"breadcrumb-item"},j={class:"products-grid"},F={class:"category"},H={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},M={class:"card border-0"},G={class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},J={class:"d-flex justify-content-between align-items-center pe-1"},K={class:"mb-0"},Q={class:"category-list list-unstyled"},X={key:0},Y={key:1},Z={key:0},ee={key:1},te={class:"loading"},se=y(()=>e("div",{class:"spinner-border text-primary",role:"status"},null,-1)),oe=[se],ae={class:"product-list"},re={class:"product-card border-cus-cream"},ie={class:"img-container"},ne=["src"],ce={class:"product-content-flex"},de={class:"product-content"},le={class:"cart-icon-container"},ue=["onClick"],pe={"aria-label":"Page navigation example"},_e={class:"pagination"},he=["onClick"];function ge(s,n,b,c,o,v){const l=f("RouterLink"),$=f("RouterView");return a(),r(_,null,[B,e("div",U,[e("nav",O,[e("ol",q,[e("li",N,[d(l,{to:"/"},{default:u(()=>[k(i(s.$t("header.home")),1)]),_:1})]),e("li",W,[d(l,{to:"/products"},{default:u(()=>[k(i(s.$t("header.products")),1)]),_:1})])])]),e("div",j,[e("div",F,[e("div",H,[e("div",M,[e("div",G,[e("div",J,[e("h4",K,i(s.$t("product.category")),1)])]),e("div",null,[e("div",null,[e("ul",Q,[e("li",null,[d(l,{to:"/products",class:p(["py-2 d-block",{current:s.$route.query.category===void 0}])},{default:u(()=>[s.$i18n.locale==="zh-TW"?(a(),r("span",X,"全部")):g("",!0),s.$i18n.locale==="en"?(a(),r("span",Y,"All")):g("",!0)]),_:1},8,["class"])]),(a(!0),r(_,null,m(o.categories,t=>(a(),r("li",{key:t},[d(l,{to:`/products?category=${t.zh}`,class:p([{current:s.$route.query.category===t.zh},"py-2 d-block"])},{default:u(()=>[s.$i18n.locale==="zh-TW"?(a(),r("span",Z,i(t.zh),1)):g("",!0),s.$i18n.locale==="en"?(a(),r("span",ee,i(t.en),1)):g("",!0)]),_:2},1032,["to","class"])]))),128))])])])])])]),e("div",null,[I(e("div",te,oe,512),[[V,o.status.productsLoading]]),e("div",ae,[(a(!0),r(_,null,m(o.products,t=>(a(),r("div",{key:t.id},[d(l,{to:`/product/${t.id}`},{default:u(()=>[e("div",re,[e("div",ie,[e("img",{src:t.imageUrl,alt:"product-img"},null,8,ne)]),e("div",ce,[e("div",de,[e("h3",null,i(t.title),1),e("span",null,"$"+i(t.price),1)]),e("div",le,[e("i",{class:"bi bi-cart-plus-fill text-primary cart-icon",style:{"font-size":"20px"},onClick:h(C=>s.addToCart(t),["prevent"])},null,8,ue)])])])]),_:2},1032,["to"])]))),128))]),e("nav",pe,[e("ul",_e,[e("li",{class:p(["page-item",{disabled:!o.pages.has_pre}])},[e("a",{class:"page-link",href:"#",onClick:n[0]||(n[0]=h(t=>v.getData(o.pages.current_page-1),["prevent"]))},i(s.$t("page.previous")),1)],2),(a(!0),r(_,null,m(o.pages.total_pages,t=>(a(),r("li",{class:p(["page-item",{active:t===o.pages.current_page}]),key:t+123},[e("a",{class:"page-link",href:"#",onClick:h(C=>v.getData(t),["prevent"])},i(t),9,he)],2))),128)),e("li",{class:p(["page-item",{disabled:!o.pages.has_next}])},[e("a",{class:"page-link",href:"#",onClick:n[1]||(n[1]=h(t=>v.getData(o.pages.current_page+1),["prevent"]))},i(s.$t("page.next")),1)],2)])])])])]),d($)],64)}const fe=T(x,[["render",ge],["__scopeId","data-v-7197eb88"]]);export{fe as default};
