import{a as k}from"./axios-G2rPRu76.js";import{_ as w,c as a,a as e,b as i,w as l,t as u,F as p,f as g,g as D,v as I,n as m,h as b,r as x,o as r,d as _,p as V,i as L}from"./index-qssx2T3E.js";var P={VITE_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"angelalee",BASE_URL:"/hex-vue3-final-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:E,VITE_API_PATH:R}=P,A={data(){return{products:[],temp:{},pages:{},categories:["蛋糕","起司蛋糕","派 / 塔","麵包","其他"],status:{productsLoading:!1}}},watch:{"$route.query":{handler(){this.getData()},deep:!0}},methods:{getData(s=1){const{category:c=""}=this.$route.query,f=`${E}/api/${R}/products?category=${c}&page=${s}`;this.status.productsLoading=!0,k.get(f).then(d=>{this.status.productsLoading=!1,this.products=d.data.products,this.pages=d.data.pagination}).catch(d=>{alert(d.response.data.message)})}},mounted(){this.getData();const s=document.cookie.replace(/(?:(?:^|.*;\s*)hexToken\s*=\s*([^;]*).*$)|^.*$/,"$1");k.defaults.headers.common.Authorization=s}},v=s=>(V("data-v-f818bf6e"),s=s(),L(),s),C=v(()=>e("div",{class:"hero-img"},null,-1)),S={class:"container"},T={"aria-label":"breadcrumb"},$={class:"breadcrumb"},B={class:"breadcrumb-item"},N={class:"breadcrumb-item"},O={class:"breadcrumb-item active text-primary","aria-current":"page"},U={class:"row row-cols-2"},q={class:"col-3 category"},H={class:"accordion border border-bottom border-top-0 border-start-0 border-end-0 mb-3",id:"accordionExample"},j={class:"card border-0"},z=v(()=>e("div",{class:"card-header px-0 py-4 bg-white border border-bottom-0 border-top border-start-0 border-end-0 rounded-0",id:"headingOne","data-bs-toggle":"collapse","data-bs-target":"#collapseOne"},[e("div",{class:"d-flex justify-content-between align-items-center pe-1"},[e("h4",{class:"mb-0"}," Category ")])],-1)),F={class:"list-unstyled"},M={class:"col-9"},G={class:"loading"},J=v(()=>e("div",{class:"spinner-border text-primary",role:"status"},null,-1)),K=[J],Q={class:"product-list"},W=["src"],X={"aria-label":"Page navigation example"},Y={class:"pagination"},Z=["onClick"];function ee(s,c,f,d,o,h){const n=x("RouterLink"),y=x("RouterView");return r(),a(p,null,[C,e("div",S,[e("nav",T,[e("ol",$,[e("li",B,[i(n,{to:"/"},{default:l(()=>[_("Home")]),_:1})]),e("li",N,[i(n,{to:"/products"},{default:l(()=>[_("Desserts")]),_:1})]),e("li",O,u(s.$route.query.category),1)])]),e("div",U,[e("div",q,[e("div",H,[e("div",j,[z,e("div",null,[e("div",null,[e("ul",F,[e("li",null,[i(n,{to:"/products",class:"py-2 d-block text-muted"},{default:l(()=>[_("全部")]),_:1})]),(r(!0),a(p,null,g(o.categories,t=>(r(),a("li",{key:t},[i(n,{to:`/products?category=${t}`,class:"py-2 d-block text-muted"},{default:l(()=>[_(u(t),1)]),_:2},1032,["to"])]))),128))])])])])])]),e("div",M,[D(e("div",G,K,512),[[I,o.status.productsLoading]]),e("div",Q,[(r(!0),a(p,null,g(o.products,t=>(r(),a("div",{class:"product-card border-cus-cream",key:t.id},[e("img",{src:t.imageUrl,alt:"product-img"},null,8,W),i(n,{to:`/product/${t.id}`},{default:l(()=>[e("h3",null,u(t.title),1)]),_:2},1032,["to"]),e("span",null,"$"+u(t.price),1)]))),128))]),e("nav",X,[e("ul",Y,[e("li",{class:m(["page-item",{disabled:!o.pages.has_pre}])},[e("a",{class:"page-link",href:"#",onClick:c[0]||(c[0]=b(t=>h.getData(o.pages.current_page-1),["prevent"]))}," Previous")],2),(r(!0),a(p,null,g(o.pages.total_pages,t=>(r(),a("li",{class:m(["page-item",{active:t===o.pages.current_page}]),key:t+123},[e("a",{class:"page-link",href:"#",onClick:b(te=>h.getData(t),["prevent"])},u(t),9,Z)],2))),128)),e("li",{class:m(["page-item",{disabled:!o.pages.has_next}])},[e("a",{class:"page-link",href:"#",onClick:c[1]||(c[1]=b(t=>h.getData(o.pages.current_page+1),["prevent"]))}," Next")],2)])])])])]),i(y)],64)}const ae=w(A,[["render",ee],["__scopeId","data-v-f818bf6e"]]);export{ae as default};
