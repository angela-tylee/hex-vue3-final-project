import{a as i}from"./axios-G2rPRu76.js";import{_ as C,c as _,a as t,F as w,f as I,g as y,v as k,t as n,b as h,w as v,r as x,o as p,j as L,p as $,i as V}from"./index-NdFvjf0J.js";var A={VITE_API_URL:"https://ec-course-api.hexschool.io/v2",VITE_API_PATH:"angelalee",BASE_URL:"/hex-vue3-final-project/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{VITE_API_URL:l,VITE_API_PATH:u}=A,R={data(){return{carts:{},status:{addCartLoading:"",cartQtyLoading:"",cartLoading:!1},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},methods:{changeCartQty(s,a=1){const m={product_id:s.product.id,qty:a};i.put(`${l}/api/${u}/cart/${s.id}`,{data:m}).then(()=>{this.getCart()}).catch(b=>{alert(b.response.data.message)})},removeCartItem(s){this.status.cartQtyLoading=s,i.delete(`${l}/api/${u}/cart/${s}`).then(()=>{this.status.cartQtyLoading="",this.getCart()}).catch(a=>{alert(a.response.data.message)})},removeCartItemAll(){i.delete(`${l}/api/${u}/carts`).then(()=>{this.getCart()}).catch(s=>{alert(s.response.data.message)})},getCart(){this.status.cartLoading=!0,i.get(`${l}/api/${u}/cart`).then(s=>{this.status.cartLoading=!1,console.log(s),this.carts=s.data.data}).catch(s=>{alert(s.response.data.message),this.status.productsLoading=!1})}},mounted(){this.getCart(),console.log(this.carts)}},o=s=>($("data-v-4691b337"),s=s(),V(),s),S={class:"container"},T={class:"grid"},E={class:"grid-card shopping-cart bg-secondary-subtle"},P=o(()=>t("h2",null,"Shopping Cart",-1)),Q={class:"table align-middle",style:{"--bs-table-bg":"transparent","--bs-table-color":"$primary"}},q=o(()=>t("thead",null,[t("tr",null,[t("th",{width:"50",class:"text-center"},"Item"),t("th",{width:"80",class:"text-center"}),t("th",{width:"50",class:"text-center"},"Price"),t("th",{width:"100",class:"text-center"},"Quantity"),t("th",{width:"50",class:"text-center"},"Total"),t("th",{width:"50",class:"text-center"})])],-1)),U=["src"],D={class:"text-end"},B={class:"text-center"},O={class:"input-group"},j=["onClick","disabled"],F=["onUpdate:modelValue"],H=["onClick"],M={class:"text-end"},N={class:"text-center",style:{"font-size":"1.5em"}},z={type:"button",style:{border:"none","border-radius":"100%","background-color":"transparent"}},G=["onClick"],J={class:"loading"},K=o(()=>t("div",{class:"spinner-border text-primary",role:"status"},null,-1)),W=[K],X={class:"grid-card order-info bg-primary"},Y={class:"order-info-content"},Z=o(()=>t("h2",{class:"text-cus-cream"},"Order Info",-1)),tt={class:"row row-cols-2"},et=o(()=>t("div",{class:"col-6 mt-4 text-cus-cream"},"Total Quantity:",-1)),st=o(()=>t("div",{class:"col-6 mt-4 text-cus-cream text-end"},null,-1)),ot=o(()=>t("div",{class:"col-6 mt-4 text-cus-cream"},"Subtotal:",-1)),at={class:"col-6 mt-4 text-cus-cream text-end"},ct=o(()=>t("div",{class:"col-12 mt-4 text-cus-cream input-group"},[t("input",{type:"text",class:"form-control",placeholder:"Enter Coupon Code","aria-label":"Recipient's username","aria-describedby":"button-addon2"}),t("button",{class:"btn btn-secondary text-cus-cream",type:"button",id:"button-addon2"}," Apply ")],-1)),nt=o(()=>t("div",{class:"col-6 mt-4 text-cus-cream fs-5 fw-semibold"},"Total:",-1)),rt={class:"col-6 mt-4 text-cus-cream text-end fs-5 fw-semibold"},dt={class:"col-12 mt-4"},it=o(()=>t("button",{type:"button",class:"btn btn-cus-cream text-primary"}," Proceed to Checkout ",-1));function lt(s,a,m,b,r,c){const g=x("RouterLink"),f=x("RouterView");return p(),_("div",S,[t("div",T,[t("div",E,[P,t("table",Q,[q,t("tbody",null,[(p(!0),_(w,null,I(r.carts.carts,e=>(p(),_("tr",{key:e.id},[t("td",null,[t("img",{src:e.product.imageUrl,alt:"",style:{width:"100%"}},null,8,U)]),t("td",null,[h(g,{to:`/product/${e.product.id}`},{default:v(()=>[t("span",null,n(e.product.title),1)]),_:2},1032,["to"])]),t("td",D,"$"+n(e.product.price),1),t("td",B,[t("div",O,[t("button",{type:"button",class:"btn btn-outline-secondary",onClick:d=>{e.qty--,c.changeCartQty(e,e.qty)},disabled:e.qty===1}," - ",8,j),y(t("input",{type:"number",class:"form-control text-center","onUpdate:modelValue":d=>e.qty=d,readonly:""},null,8,F),[[L,e.qty]]),t("button",{type:"button",class:"btn btn-outline-secondary",onClick:d=>{e.qty++,c.changeCartQty(e,e.qty)}}," + ",8,H)])]),t("td",M,"$"+n(e.total),1),t("td",N,[t("button",z,[t("i",{class:"bi bi-x",onClick:d=>c.removeCartItem(e.id)},null,8,G)])])]))),128))])]),y(t("div",J,W,512),[[k,r.status.cartLoading]]),t("button",{type:"button",class:"btn btn-primary text-cus-cream",onClick:a[0]||(a[0]=(...e)=>c.removeCartItemAll&&c.removeCartItemAll(...e))},"清空購物車")]),t("div",X,[t("div",Y,[Z,t("div",tt,[et,st,ot,t("div",at,"$ "+n(r.carts.total),1),ct,nt,t("div",rt," $ "+n(r.carts.final_total),1)])]),t("div",dt,[h(g,{to:"/checkout"},{default:v(()=>[it]),_:1})])])]),h(f)])}const ht=C(R,[["render",lt],["__scopeId","data-v-4691b337"]]);export{ht as default};
